(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{112:function(t,e,a){},114:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(9),i=a.n(c);a(87),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,s,l=a(18),u=a(31),d=a(14),f=a.n(d),p=a(21),b=a(47),m=a(27),O=a(7),T=a(67),E=a.n(T).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"3968e2e7-ef1b-4e58-9108-d41e4dea47f4"}}),v=function(t,e){return E.put("todo-lists/".concat(t),{title:e})},k=function(t){return E.delete("todo-lists/".concat(t))},h=function(t){return E.post("todo-lists",{title:t})},j=function(){return E.get("todo-lists")},g=function(t){return E.get("todo-lists/".concat(t,"/tasks"))},y=function(t,e){return E.post("todo-lists/".concat(t,"/tasks"),{title:e})},S=function(t,e){return E.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},L=function(t,e,a){return E.put("/todo-lists/".concat(e,"/tasks/").concat(a),t)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var I={status:"loading",error:"ERROR"},w=function(t){return{type:"APP/SET-STATUS",status:t}},C=function(t){return{type:"APP/SET-ERROR",error:t}},x={},D=function(t,e){return{type:"REMOVE-TASK",todoListId:t,taskId:e}},A=function(t,e,a){return{type:"UPDATE-TASK",todoListId:t,taskID:e,model:a}},R=function(t,e,a){return function(){var n=Object(p.a)(f.a.mark((function n(r,c){var i,o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,i=c(),!(o=i.tasks[t].find((function(t){return t.id===e})))){n.next=10;break}return r(w("loading")),n.next=7,L(Object(O.a)({title:o.title,description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline},a),t,e);case 7:n.sent,r(A(t,e,a)),r(w("succeeded"));case 10:n.next=15;break;case 12:throw n.prev=12,n.t0=n.catch(0),new Error(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(t,e){return n.apply(this,arguments)}}()},P=function(t,e){e.messages.length?t(C(e.messages[0])):t(C("ERROR")),t(w("failed"))},N=function(t,e){t(C(e)),t(w("failed"))},F=[],K=function(t,e){return{type:"CHANGE-TODOLIST-TITLE",todoListId:t,title:e}},H=function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",id:t,entityStatus:e}},U=a(68),M=Object(u.c)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(O.a)(Object(O.a)({},t),{},Object(m.a)({},e.todoListId,t[e.todoListId].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":return Object(O.a)(Object(O.a)({},t),{},Object(m.a)({},e.task.todoListId,[].concat(Object(b.a)(t[e.task.todoListId]),[e.task])));case"UPDATE-TASK":return Object(O.a)(Object(O.a)({},t),{},Object(m.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.taskID?Object(O.a)(Object(O.a)({},t),e.model):t}))));case"ADD-TODOLIST":return Object(O.a)(Object(O.a)({},t),{},Object(m.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var a=Object(O.a)({},t);return delete a[e.todoListId],a;case"SET-TODOLIST":var n=Object(O.a)({},t);return e.todolists.forEach((function(t){n[t.id]=[]})),n;case"SET-TASKS":return Object(O.a)(Object(O.a)({},t),{},Object(m.a)({},e.todoListId,e.tasks));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todoListId}));case"ADD-TODOLIST":return[Object(O.a)(Object(O.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(b.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todoListId?Object(O.a)(Object(O.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todoListId?Object(O.a)(Object(O.a)({},t),{},{filter:e.filter}):t}));case"SET-TODOLIST":return e.todolists.map((function(t){return Object(O.a)(Object(O.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(O.a)(Object(O.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(O.a)(Object(O.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(O.a)(Object(O.a)({},t),{},{error:e.error});default:return t}}}),G=Object(u.d)(M,Object(u.a)(U.a));window.store=G;a(112);var V=a(154),z=a(155),B=a(149),Y=a(157),J=a(152),W=a(158),q=a(159),$=a(156),Q=a(153),X=a(115),Z=a(34),_=a(160),tt=a(150),et=r.a.memo((function(t){var e=Object(n.useState)(""),a=Object(Z.a)(e,2),c=a[0],i=a[1],o=Object(n.useState)(null),s=Object(Z.a)(o,2),l=s[0],u=s[1],d=function(){var e=c.trim();e?(t.addItem(e),i("")):u("Title is required!")};return r.a.createElement("div",null,r.a.createElement(_.a,{variant:"outlined",label:"title",error:!!l,helperText:l,value:c,onChange:function(t){i(t.currentTarget.value)},onKeyPress:function(t){null!==l&&u(null),"Enter"===t.key&&d()},disabled:"loading"===t.entityStatus}),r.a.createElement(B.a,{color:"primary",onClick:d,disabled:"loading"===t.entityStatus},r.a.createElement(tt.a,null)))})),at=a(151),nt=a(162),rt=r.a.memo((function(t){console.log("EditableSpan");var e=Object(n.useState)(!1),a=Object(Z.a)(e,2),c=a[0],i=a[1],o=Object(n.useState)(t.title),s=Object(Z.a)(o,2),l=s[0],u=s[1],d=function(){i(!1),t.changeTitle(l)};return c?r.a.createElement(_.a,{value:l,autoFocus:!0,onChange:function(t){u(t.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&d()},onBlur:d}):r.a.createElement("span",{onDoubleClick:function(){return i(!0)}},t.title)})),ct=r.a.memo((function(t){var e=t.task,a=t.todoListId,c=t.changeTaskTitle,i=t.changeTaskStatus,s=t.removeTask;console.log("Task");var l=Object(n.useCallback)((function(){return s(a,e.id)}),[s,e.id,a]),u=Object(n.useCallback)((function(t){return i(a,e.id,t.currentTarget.checked?o.Completed:o.New)}),[i,e.id,a]),d=Object(n.useCallback)((function(t){c(a,e.id,t)}),[c,e.id,a]);return r.a.createElement("div",{key:e.id,style:{position:"relative"}},r.a.createElement(nt.a,{onChange:u,checked:e.status===o.Completed}),r.a.createElement(rt,{title:e.title,changeTitle:d}),r.a.createElement(B.a,{onClick:l,style:{position:"absolute",right:"5px"}},r.a.createElement(at.a,null)))})),it=r.a.memo((function(t){var e=Object(l.b)();Object(n.useEffect)((function(){var a;e((a=t.id,function(){var t=Object(p.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(w("loading")),t.next=4,g(a);case 4:n=t.sent,e({type:"SET-TASKS",tasks:n.data.items,todoListId:a}),e(w("succeeded")),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(0),new Error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[]);var a=t.tasks;"active"===t.filter&&(a=a.filter((function(t){return t.status===o.New}))),"completed"===t.filter&&(a=a.filter((function(t){return t.status===o.Completed})));var c=a.map((function(e){return r.a.createElement(ct,{key:e.id,task:e,todoListId:t.id,changeTaskTitle:t.changeTaskTitle,changeTaskStatus:t.changeTaskStatus,removeTask:t.removeTask})})),i=Object(n.useCallback)((function(e){return t.addTask(t.id,e)}),[t.addTask,t.id]),s=Object(n.useCallback)((function(e){t.changeTodoListTitle(t.id,e)}),[t.changeTodoListTitle,t.id]),u=Object(n.useCallback)((function(){t.changeTodoListFilter(t.id,"all")}),[t.changeTodoListFilter,t.id]),d=Object(n.useCallback)((function(){t.changeTodoListFilter(t.id,"active")}),[t.changeTodoListFilter,t.id]),b=Object(n.useCallback)((function(){t.changeTodoListFilter(t.id,"completed")}),[t.changeTodoListFilter,t.id]);return r.a.createElement("div",{style:{padding:"10px",position:"relative"}},r.a.createElement("h3",null,r.a.createElement(rt,{title:t.title,changeTitle:s}),r.a.createElement(B.a,{onClick:function(){t.removeTodoList(t.id)},style:{position:"absolute",right:"2px",top:"2px"},size:"small",disabled:"loading"===t.entityStatus},r.a.createElement(at.a,null))),r.a.createElement(et,{addItem:i,entityStatus:t.entityStatus}),r.a.createElement("div",null,c,!a.length&&r.a.createElement("div",{style:{padding:"10px",color:"grey"}},"No task")),r.a.createElement("div",null,r.a.createElement(J.a,{onClick:u,size:"small",variant:"all"===t.filter?"contained":"text"},"All"),r.a.createElement(J.a,{onClick:d,size:"small",variant:"active"===t.filter?"contained":"text",color:"primary"},"Active"),r.a.createElement(J.a,{onClick:b,size:"small",variant:"completed"===t.filter?"contained":"text",color:"secondary"},"Completed")))})),ot=function(){Object(n.useEffect)((function(){a(function(){var t=Object(p.a)(f.a.mark((function t(e){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(w("loading")),t.next=4,j();case 4:a=t.sent,e({type:"SET-TODOLIST",todolists:a.data}),e(w("succeeded")),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(0),new Error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}())}),[]);var t=Object(l.c)((function(t){return t.todolists})),e=Object(l.c)((function(t){return t.tasks})),a=Object(l.b)(),c=Object(n.useCallback)((function(t,e){a(function(t,e){return function(){var a=Object(p.a)(f.a.mark((function a(n){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(w("loading")),a.next=3,y(t,e);case 3:0===(r=a.sent).data.resultCode?(n({type:"ADD-TASK",task:r.data.data.item}),n(w("succeeded"))):(r.data.messages.length?n(C(r.data.messages[0])):n(C("ERROR")),n(w("failed")));case 5:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()}(t,e))}),[a]),i=Object(n.useCallback)((function(t,e){a(function(t,e){return function(){var a=Object(p.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(w("loading")),a.next=4,S(t,e);case 4:a.sent,n(D(t,e)),n(w("succeeded")),a.next=12;break;case 9:throw a.prev=9,a.t0=a.catch(0),new Error(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(t){return a.apply(this,arguments)}}()}(t,e))}),[a]),o=Object(n.useCallback)((function(t,e,n){a(R(t,e,{status:n}))}),[a]),s=Object(n.useCallback)((function(t,e,n){a(R(t,e,{title:n}))}),[a]),u=Object(n.useCallback)((function(t){a(function(t){return function(){var e=Object(p.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(w("loading")),e.next=4,h(t);case 4:0===(n=e.sent).data.resultCode?(a({type:"ADD-TODOLIST",todolist:n.data.data.item}),a(w("succeeded"))):P(a,n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),N(a,e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}(t))}),[a]),d=Object(n.useCallback)((function(t,e){a({type:"CHANGE-TODOLIST-FILTER",todoListId:t,filter:e})}),[a]),b=Object(n.useCallback)((function(t){a(function(t){return function(){var e=Object(p.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(w("loading")),a(H(t,"loading")),e.next=4,k(t);case 4:e.sent,a({type:"REMOVE-TODOLIST",todoListId:t}),a(w("succeeded"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t))}),[a]),m=Object(n.useCallback)((function(t,e){a(function(t,e){return function(){var a=Object(p.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(w("loading")),a.next=4,v(t,e);case 4:a.sent,n(K(t,e)),n(w("succeeded")),a.next=12;break;case 9:throw a.prev=9,a.t0=a.catch(0),new Error(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(t){return a.apply(this,arguments)}}()}(t,e))}),[a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{container:!0,style:{padding:"20px"}},r.a.createElement("div",null,r.a.createElement("h3",null,"add new todolist"),r.a.createElement("div",null,r.a.createElement(et,{addItem:u})))),r.a.createElement(Q.a,{container:!0,spacing:3},t.map((function(t){return r.a.createElement(Q.a,{item:!0,key:t.id},r.a.createElement(X.a,{style:{padding:"10px"}},r.a.createElement(it,{key:t.id,id:t.id,title:t.title,tasks:e[t.id],filter:t.filter,entityStatus:t.entityStatus,removeTask:i,changeTodoListFilter:d,addTask:c,changeTaskStatus:o,removeTodoList:b,changeTaskTitle:s,changeTodoListTitle:m})))}))))},st=a(164),lt=a(161);function ut(t){return r.a.createElement(lt.a,Object.assign({elevation:6,variant:"filled"},t))}function dt(){var t=Object(l.c)((function(t){return t.app.error})),e=Object(l.b)(),a=function(t,a){"clickaway"!==a&&e(C(null))};return r.a.createElement(st.a,{open:null!==t,autoHideDuration:6e3,onClose:a},r.a.createElement(ut,{onClose:a,severity:"error"},t))}var ft=function(){var t=Object(l.c)((function(t){return t.app.status}));return r.a.createElement("div",{className:"App"},r.a.createElement(V.a,{position:"static"},r.a.createElement(z.a,null,r.a.createElement(B.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement($.a,null)),r.a.createElement(Y.a,{variant:"h6"}),r.a.createElement(J.a,{color:"inherit"},"Login"))),"loading"===t&&r.a.createElement(W.a,{color:"secondary"}),r.a.createElement(q.a,{fixed:!0},r.a.createElement(ot,null)),r.a.createElement(dt,null))};i.a.render(r.a.createElement(l.a,{store:G},r.a.createElement(ft,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},82:function(t,e,a){t.exports=a(114)},87:function(t,e,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.d6c2207f.chunk.js.map