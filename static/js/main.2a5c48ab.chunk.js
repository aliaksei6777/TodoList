(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{107:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(9),i=a.n(c);a(80),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(81);var o,s,l=a(31),u=a(148),d=a(138),f=a(139),p=r.a.memo((function(t){var e=Object(n.useState)(""),a=Object(l.a)(e,2),c=a[0],i=a[1],o=Object(n.useState)(null),s=Object(l.a)(o,2),p=s[0],b=s[1],m=function(){var e=c.trim();e?(t.addItem(e),i("")):b("Title is required!")};return r.a.createElement("div",null,r.a.createElement(u.a,{variant:"outlined",label:"title",error:!!p,helperText:p,value:c,onChange:function(t){i(t.currentTarget.value)},onKeyPress:function(t){null!==p&&b(null),"Enter"===t.key&&m()}}),r.a.createElement(d.a,{color:"primary",onClick:m},r.a.createElement(f.a,null)))})),b=a(142),m=a(108),O=a(143),T=a(144),k=a(146),v=a(141),E=a(147),h=a(145),j=a(13),g=a.n(j),L=a(19),w=a(8),y=a(42),I=a(64),C=a.n(I);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var S=C.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"3968e2e7-ef1b-4e58-9108-d41e4dea47f4"}}),x=function(t){return S.delete("todo-lists/".concat(t))},D=function(t){return S.post("todo-lists",{title:t})},A=function(){return S.get("todo-lists")},K=function(t){return S.get("todo-lists/".concat(t,"/tasks"))},F=function(t,e){return S.post("todo-lists/".concat(t,"/tasks"),{title:e})},N=function(t,e){return S.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},R=function(t,e,a){return S.put("/todo-lists/".concat(e,"/tasks/").concat(a),t)},M=[],P=a(24),H={},U=function(t,e){return{type:"REMOVE-TASK",todoListId:t,taskId:e}},V=function(t,e){return{type:"ADD-TASK",task:e,id:t}},z=function(t,e,a){return{type:"UPDATE-TASK",id:t,taskID:e,model:a}},G=function(t,e){return{type:"SET-TASKS",tasks:t,id:e}},B=function(t,e,a){return function(){var n=Object(L.a)(g.a.mark((function n(r,c){var i,o;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,i=c(),(o=i.tasks[t].find((function(t){return t.id===e})))&&(R(Object(w.a)({title:o.title,description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline},a),t,e),r(z(t,e,a))),n.next=9;break;case 6:throw n.prev=6,n.t0=n.catch(0),new Error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(t,e){return n.apply(this,arguments)}}()},J=a(23),W=r.a.memo((function(t){console.log("EditableSpan");var e=Object(n.useState)(!1),a=Object(l.a)(e,2),c=a[0],i=a[1],o=Object(n.useState)(t.title),s=Object(l.a)(o,2),d=s[0],f=s[1],p=function(){i(!1),t.changeTitle(d)};return c?r.a.createElement(u.a,{value:d,autoFocus:!0,onChange:function(t){f(t.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&p()},onBlur:p}):r.a.createElement("span",{onDoubleClick:function(){return i(!0)}},t.title)})),q=a(140),Y=a(149),$=r.a.memo((function(t){var e=t.task,a=t.todoListId,c=t.changeTaskTitle,i=t.changeTaskStatus,s=t.removeTask;console.log("Task");var l=Object(n.useCallback)((function(){return s(a,e.id)}),[s,e.id,a]),u=Object(n.useCallback)((function(t){return i(a,e.id,t.currentTarget.checked?o.Completed:o.New)}),[i,e.id,a]),f=Object(n.useCallback)((function(t){c(a,e.id,t)}),[c,e.id,a]);return r.a.createElement("div",{key:e.id,style:{position:"relative"}},r.a.createElement(Y.a,{onChange:u,checked:e.status===o.Completed}),r.a.createElement(W,{title:e.title,changeTitle:f}),r.a.createElement(d.a,{onClick:l,style:{position:"absolute",right:"5px"}},r.a.createElement(q.a,null)))})),Q=r.a.memo((function(t){var e=Object(J.b)();Object(n.useEffect)((function(){var a;e((a=t.id,function(){var t=Object(L.a)(g.a.mark((function t(e){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(a);case 2:n=t.sent,e(G(n.data.items,a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[]);var a=t.tasks;"active"===t.filter&&(a=a.filter((function(t){return t.status===o.New}))),"completed"===t.filter&&(a=a.filter((function(t){return t.status===o.Completed})));var c=a.map((function(e){return r.a.createElement($,{key:e.id,task:e,todoListId:t.id,changeTaskTitle:t.changeTaskTitle,changeTaskStatus:t.changeTaskStatus,removeTask:t.removeTask})})),i=Object(n.useCallback)((function(e){return t.addTask(t.id,e)}),[t.addTask,t.id]),s=Object(n.useCallback)((function(e){t.changeTodoListTitle(t.id,e)}),[t.changeTodoListTitle,t.id]),l=Object(n.useCallback)((function(){t.changeTodoListFilter(t.id,"all")}),[t.changeTodoListFilter,t.id]),u=Object(n.useCallback)((function(){t.changeTodoListFilter(t.id,"active")}),[t.changeTodoListFilter,t.id]),f=Object(n.useCallback)((function(){t.changeTodoListFilter(t.id,"completed")}),[t.changeTodoListFilter,t.id]);return r.a.createElement("div",{style:{padding:"10px",position:"relative"}},r.a.createElement("h3",null,r.a.createElement(W,{title:t.title,changeTitle:s}),r.a.createElement(d.a,{onClick:function(){return t.removeTodoList(t.id)},style:{position:"absolute",right:"2px",top:"2px"},size:"small"},r.a.createElement(q.a,null))),r.a.createElement(p,{addItem:i}),r.a.createElement("div",null,c,!a.length&&r.a.createElement("div",{style:{padding:"10px",color:"grey"}},"No task")),r.a.createElement("div",null,r.a.createElement(v.a,{onClick:l,size:"small",variant:"all"===t.filter?"contained":"text"},"All"),r.a.createElement(v.a,{onClick:u,size:"small",variant:"active"===t.filter?"contained":"text",color:"primary"},"Active"),r.a.createElement(v.a,{onClick:f,size:"small",variant:"completed"===t.filter?"contained":"text",color:"secondary"},"Completed")))}));var X=function(){Object(n.useEffect)((function(){a(function(){var t=Object(L.a)(g.a.mark((function t(e){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A();case 3:a=t.sent,e({type:"SET-TODOLIST",todolists:a.data}),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())}),[]);var t=Object(J.c)((function(t){return t.todolists})),e=Object(J.c)((function(t){return t.tasks})),a=Object(J.b)(),c=Object(n.useCallback)((function(t,e){a(function(t,e){return function(){var a=Object(L.a)(g.a.mark((function a(n){var r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,F(t,e);case 3:r=a.sent,n(V(t,r.data.data.item)),a.next=10;break;case 7:throw a.prev=7,a.t0=a.catch(0),new Error(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(t){return a.apply(this,arguments)}}()}(t,e))}),[a]),i=Object(n.useCallback)((function(t,e){a(function(t,e){return function(){var a=Object(L.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N(t,e);case 3:a.sent,n(U(t,e)),a.next=10;break;case 7:throw a.prev=7,a.t0=a.catch(0),new Error(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(t){return a.apply(this,arguments)}}()}(t,e))}),[a]),o=Object(n.useCallback)((function(t,e,n){a(B(t,e,{status:n}))}),[a]),s=Object(n.useCallback)((function(t,e,n){a(B(t,e,{title:n}))}),[a]),l=Object(n.useCallback)((function(t){a(function(t){return function(){var e=Object(L.a)(g.a.mark((function e(a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t);case 3:n=e.sent,a({type:"ADD-TODOLIST",todolist:n.data.data.item}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}(t))}),[a]),u=Object(n.useCallback)((function(t,e){a({type:"CHANGE-TODOLIST-FILTER",todoListId:t,filter:e})}),[a]),f=Object(n.useCallback)((function(t){a(function(t){return function(){var e=Object(L.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(t);case 3:e.sent,a({type:"REMOVE-TODOLIST",todoListId:t}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}(t))}),[a]),j=Object(n.useCallback)((function(t,e){a({type:"CHANGE-TODOLIST-TITLE",todoListId:t,title:e})}),[a]),w=t.map((function(t){return r.a.createElement(b.a,{item:!0,key:t.id},r.a.createElement(m.a,{style:{padding:"10px"}},r.a.createElement(Q,{key:t.id,id:t.id,title:t.title,tasks:e[t.id],filter:t.filter,removeTask:i,changeTodoListFilter:u,addTask:c,changeTaskStatus:o,removeTodoList:f,changeTaskTitle:s,changeTodoListTitle:j})))}));return r.a.createElement("div",{className:"App"},r.a.createElement(O.a,{position:"static"},r.a.createElement(T.a,null,r.a.createElement(d.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(h.a,null)),r.a.createElement(k.a,{variant:"h6"}),r.a.createElement(v.a,{color:"inherit"},"Login"))),r.a.createElement(E.a,{fixed:!0},r.a.createElement(b.a,{container:!0,style:{padding:"20px"}},r.a.createElement("div",null,r.a.createElement("h3",null,"add new todolist"),r.a.createElement("div",null,r.a.createElement(p,{addItem:l})))),r.a.createElement(b.a,{container:!0,spacing:3},w)))},Z=a(30),_=a(66),tt=Object(Z.c)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(w.a)(Object(w.a)({},t),{},Object(P.a)({},e.todoListId,t[e.todoListId].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":return Object(w.a)(Object(w.a)({},t),{},Object(P.a)({},e.task.todoListId,[].concat(Object(y.a)(t[e.task.todoListId]),[Object(w.a)({},e.task)])));case"UPDATE-TASK":return Object(w.a)(Object(w.a)({},t),{},Object(P.a)({},e.id,t[e.id].map((function(t){return t.id===e.taskID?Object(w.a)(Object(w.a)({},t),e.model):t}))));case"ADD-TODOLIST":return Object(w.a)(Object(w.a)({},t),{},Object(P.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var a=Object(w.a)({},t);return delete a[e.todoListId],a;case"SET-TODOLIST":var n=Object(w.a)({},t);return e.todolists.forEach((function(t){n[t.id]=[]})),n;case"SET-TASKS":return Object(w.a)(Object(w.a)({},t),{},Object(P.a)({},e.id,e.tasks));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todoListId}));case"ADD-TODOLIST":return[Object(w.a)(Object(w.a)({},e.todolist),{},{filter:"all"})].concat(Object(y.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todoListId?Object(w.a)(Object(w.a)({},t),{},{title:e.title}):Object(w.a)({},t)}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todoListId?Object(w.a)(Object(w.a)({},t),{},{filter:e.filter}):t}));case"SET-TODOLIST":return e.todolists.map((function(t){return Object(w.a)(Object(w.a)({},t),{},{filter:"all"})}));default:return t}}}),et=Object(Z.d)(tt,Object(Z.a)(_.a));window.store=et,i.a.render(r.a.createElement(J.a,{store:et},r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},75:function(t,e,a){t.exports=a(107)},80:function(t,e,a){},81:function(t,e,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.2a5c48ab.chunk.js.map